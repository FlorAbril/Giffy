(this.webpackJsonpgiffy=this.webpackJsonpgiffy||[]).push([[0],[,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="dIJrma20pSU6ymMwWnDbiaT7NFHeAGVa",r="https://api.giphy.com/v1"},,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),l=(n(13),n(14),n(1)),o=n(2),u=n(5),s=function(e){var t=e.data,n=void 0===t?[]:t;return Array.isArray(n)?n.map((function(e){var t=e.images;return{title:e.title,id:e.id,url:t.downsized_medium.url}})):[]};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,n=void 0===t?25:t,a=e.keyword,r=void 0===a?"morty":a,c=e.page,i=void 0===c?0:c,l="".concat(u.b,"/gifs/search?api_key=").concat(u.a,"&q=").concat(r,"&limit=").concat(n,"&offset=").concat(i*n,"&rating=G&lang=en");return fetch(l).then((function(e){return e.json()})).then(s)}var f=r.a.createContext({});function d(e){var t=e.children,n=Object(a.useState)([]),c=Object(l.a)(n,2),i=c[0],o=c[1];return r.a.createElement(f.Provider,{value:{gifs:i,setGifs:o}},t)}var g=f;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:null},t=e.keyword,n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],f=u[1],d=Object(a.useContext)(g),v=d.gifs,E=d.setGifs,p=Object(a.useState)(0),h=Object(l.a)(p,2),b=h[0],y=h[1],w=t||localStorage.getItem("lastKeyword");return Object(a.useEffect)((function(){i(!0),m({keyword:w}).then((function(e){E(e),i(!1),localStorage.setItem("lastKeyword",w)}))}),[t,w,E]),Object(a.useEffect)((function(){0!==b&&(f(!0),m({keyword:w,page:b}).then((function(e){E((function(t){return t.concat(e)})),f(!1)})))}),[w,b,E]),{loading:c,loadingNextPage:s,gifs:v,setPage:y}}n(15);function E(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}n(16);function p(e){var t=e.title,n=e.id,a=e.url;return r.a.createElement("div",{className:"Gif"},r.a.createElement(o.a,{to:"/gif/".concat(n),className:"Gif-link"},r.a.createElement("h4",null,t),r.a.createElement("img",{alt:t,src:a})))}n(17);function h(e){var t=e.gifs,n=e.title;return r.a.createElement("div",null,r.a.createElement("h3",null,n),r.a.createElement("div",{className:"ListOfGifs"},t.map((function(e){var t=e.id,n=e.title,a=e.url;return r.a.createElement(p,{id:t,key:t,title:n,url:a})}))))}var b=n(0),y=b.useState,w=b.useEffect,O=b.useRef;var j=r.a.lazy((function(){return n.e(3).then(n.bind(null,20))}));function k(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.distance,n=void 0===t?"100px":t,a=y(!1),r=Object(l.a)(a,2),c=r[0],i=r[1],o=O();return w((function(){new IntersectionObserver((function(e,t){var n=e[0];console.log(n.isIntersecting),n.isIntersecting&&(i(!0),t.disconnect())}),{routeMargin:n}).observe(o.current)}),[]),{isNearScreen:c,fromRef:o}}({distance:"1px"}),t=e.isNearScreen,n=e.fromRef;return r.a.createElement("div",{ref:n},r.a.createElement(a.Suspense,{fallback:r.a.createElement(E,null)},t?r.a.createElement(j,null):r.a.createElement(E,null)))}function S(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(o.c)(),u=Object(l.a)(i,2)[1],s=v(),m=s.loading,f=s.gifs;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u("/search/".concat(n))}},r.a.createElement("input",{placeholder:"Buscar gifs",onChange:function(e){c(e.target.value)},type:"text",value:n})),m?r.a.createElement(E,null):r.a.createElement("div",{className:"wrapper-gif"},m||r.a.createElement(h,{gifs:f,title:"\xdaltima b\xfasqueda"}),r.a.createElement(k,null)))}function N(e){var t=e.params.keyword,n=v({keyword:t}),a=n.loading,c=n.gifs,i=n.setPage;return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(E,null):r.a.createElement(r.a.Fragment,null," ",r.a.createElement("h3",null,decodeURI(t)),r.a.createElement(h,{gifs:c})),r.a.createElement("button",{onClick:function(){return i((function(e){return e+1}))},style:{width:"fit-content",fontSize:"20px",marginTop:"1em"}},"Get next page"))}function x(e){var t=e.params,n=Object(a.useContext)(g).gifs.find((function(e){return e.id===t.id}));return console.log(n),r.a.createElement(p,n)}var G=r.a.createContext({name:"sin provider",estado:!0});function I(){return r.a.createElement(G.Provider,{value:{name:"flor abril",estado:!0}},r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"App-content"},r.a.createElement(o.a,{to:"/"},r.a.createElement("img",{className:"App-logo",alt:"Giffy logo",src:"./logo.svg"})),r.a.createElement(d,null,r.a.createElement(o.b,{component:S,path:"/"}),r.a.createElement(o.b,{component:S,path:"/Giffy"}),r.a.createElement(o.b,{component:N,path:"/search/:keyword"}),r.a.createElement(o.b,{component:x,path:"/gif/:id"})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.b29356e7.chunk.js.map